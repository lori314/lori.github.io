---
title: 我的ROS学习之旅
author: Magic魔小牛
date: 2025-09-17 14:00:00 +0800
categories: [Blogging, Tutorial]
tags: [ROS]
render_with_liquid: false
---

（注意：本站所有博客均是记录本人学习过程中的理解，可能存在错误和不完善之处，请仔细甄别）

## ROS1 理解和安装

我没有去找ROS的起源和历史，而是在简单看了一些课程后直接去安装了。ROS意为机器人操作系统，我们使用它主要是与一些机器人相关零部件的产品交互。它和我们计算机的操作系统一样，主要是方便我们管理进程的运行（ROS下称作节点）。学会了它以后我们就学会了如何在我们的机器人上部署代码，连接我们的机械臂、摄像头等设备。现存的ROS系统有ROS1和ROS2，前者的生态更为完善，但都有向ROS2更新的态势。笔者没接触过ROS2，也是为了和实验室的设备接轨，先学ROS1。

下面介绍ROS1的安装：

ROS1需要部署在Linux系统上，对于Windows操作系统的用户，可以用Ubuntu或者虚拟机环境。我使用的版本是Ubuntu 20.04。注意我最开始安装在Ubuntu 24.04上，但是发现版本不对。最好是使用Ubuntu 20.xx版本，比较稳定。Ubuntu的安装不再赘述。

我们打开Ubuntu 20.04的终端如下：

![ubuntu1](img\ubuntu1.png)

输入以下指令：

设置软件源：

```bash
sudo sh -c '. /etc/lsb-release && echo "deb http://mirrors.tuna.tsinghua.edu.cn/ros/ubuntu/ `lsb_release -cs` main" > /etc/apt/sources.list.d/ros-latest.list'
```

添加密钥：

```bash
sudo apt-key adv --keyserver 'hkp://keyserver.ubuntu.com:80' --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
```

更新软件包：

```bash
sudo apt update
```

接下来是安装指令（Desktop-Full version)：

```bash
sudo apt install ros-<ROS_DISTRO>-desktop-full
```

设置环境变量：

```bash
echo "source /opt/ros/<ROS_DISTRO>/setup.bash" >> ~/.bashrc
source ~/.bashrc
```

还需要初始化rosdep。rosdep 是一个用于安装ROS软件包系统依赖的工具，是运行ROS核心组件所必需的。

```bash
sudo rosdep init
rosdep update
```

此外，我们还可以安装一些额外的工具，用来管理工作空间：

```bash
sudo apt install python3-rosdep python3-rosinstall python3-rosinstall-generator python3-wstool build-essential
```

至此就安装完成了。

#### 安装验证和第一个ROS节点

ROS1 内置了一个小海龟节点，我们一般用它来验证安装是否成功。

打开一个Ubuntu终端，输入

```bash
roscore
```

会输出以下信息：

![roscore](img\roscore.png)

这代表我们的master成功启动了。这个节点相当于一个总控制台，其它节点的运行都需要先启动roscore。

再打开另一个终端，输入以下指令：

```bash
rosrun turtlesim turtlesim_node
```

会看到一个小海龟出现在屏幕上：

![turtle](img\turtle.png)

它的图像可能会有区别，会随机展示一张小海龟的照片。

再打开第三个终端，输入：

```bash
rosrun turtlesim turtle_teleop_key
```

这个是用键盘控制小海龟的节点。打开后，我们就可以用键盘上的方向键控制小海龟的移动了。

#### debug

我在安装后启动roscore后遇到了如下问题：

~~~bash
lori@LAPTOP-ETP28CAA:/mnt/c/Users/lenovo$ roscore
... logging to /home/lori/.ros/log/75c13160-78d6-11f0-8df8-e02e0be00646/roslaunch-LAPTOP-ETP28CAA-43.log
Checking log directory for disk usage. This may take a while.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

RLException: Unable to contact my own server at [http://localhost:33593/].
This usually means that the network is not configured properly.

A common cause is that the machine cannot connect to itself.  Please check
for errors by running:

codeCode

```
ping localhost
```

For more tips, please see

codeCode

```
http://wiki.ros.org/ROS/NetworkSetup
```

The traceback for the exception was written to the log file
~~~

这个是WSL上ROS网络问题。解决方案是放弃模糊的localhost，明确告诉ROS使用WSL自己的IP地址。具体流程如下：

**第一步：找到你的WSL的IP地址**

1. 在崭新的终端里，输入以下命令：

   ```bash
   hostname -I
   ```

2. 这个命令会输出一个或多个IP地址，我们只需要第一个。它看起来应该像 172.20.145.132 这样的。**请复制这个IP地址，我们下面会用到它。**

**第二步：配置环境变量并永久保存**

1. 我们将把这个IP地址设置成ROS的专用网络地址。**请把下面命令中的 <YOUR_WSL_IP_ADDRESS> 替换成你上一步得到的真实IP地址。**

   ```bash
   echo "export ROS_MASTER_URI=http://<YOUR_WSL_IP_ADDRESS>:11311" >> ~/.bashrc
   echo "export ROS_IP=<YOUR_WSL_IP_ADDRESS>" >> ~/.bashrc
   ```

   - 例如，如果你的IP是 172.20.145.132，你应该运行：

     ```bash
     echo "export ROS_MASTER_URI=http://172.20.145.132:11311" >> ~/.bashrc
     echo "export ROS_IP=172.20.145.132" >> ~/.bashrc
     ```

2. 运行以下命令，让这个新的配置立刻生效：

   ```bash
   source ~/.bashrc
   ```

这样后再次运行roscore，就可以得到之前图示的结果了